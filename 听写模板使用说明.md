# 单词听写Anki模板使用说明

## 📋 模板简介

这个Anki模板专为单词听写练习设计，支持英式和美式发音播放，帮助用户通过听写练习提高英语单词记忆和拼写能力。

## 🎯 主要功能

### 正面功能
- 🎧 **双语发音播放**: 支持英式和美式发音切换
- ⚡ **播放速度控制**: 0.5x - 1.5x 可调播放速度
- 📝 **实时输入**: 即时输入用户听到的单词或词组
- ⌨️ **快捷键支持**: Ctrl+Space播放，Ctrl+R清空
- 🔄 **重复播放**: 可多次播放帮助理解

### 背面功能
- ✅ **答案对比**: 自动比对用户输入与正确答案
- 🔊 **发音重播**: 背面可重新播放发音
- 📢 **音标显示**: 自动显示英式和美式音标
- 📚 **详细释义**: 显示单词的详细定义
- 🎨 **美观界面**: 响应式设计，适配各种屏幕

## 🛠️ 安装步骤

### 1. 创建新的笔记类型

在Anki中创建新的笔记类型，包含以下字段：

```
字段名称        用途
---------      ----
Front          单词或词组（必填）
Definition     单词释义（可选）
```

### 2. 设置模板

将提供的HTML代码分别设置到卡片模板中：

- **正面模板**: 使用 `DictationTemplateFront.html` 的内容
- **背面模板**: 使用 `DictationTemplateBack.html` 的内容

## 📝 字段填写格式

### Front字段（必填）
直接输入要听写的单词或词组：
```
hello
apple pie
computer science
```

### Definition字段（可选）
可以使用HTML格式或纯文本：

**HTML格式示例：**
```html
<div class="definition-item">n. 问候，打招呼</div>
<div class="definition-item">v. 向...问好</div>
<div class="definition-item">int. 你好！</div>
```

**纯文本格式示例：**
```
n. 问候，打招呼
v. 向...问好
int. 你好！
```



## 📢 音标符号说明

### 常见IPA符号对照表

| IPA符号 | 普通表示 | 音标示例 | 单词示例 | 说明 |
|---------|----------|----------|----------|------|
| ɹ | r | /fɹʌnt/ | front | 英语r音 |
| æ | a | /æpl/ | apple | 短a音 |
| θ | th | /θɪŋk/ | think | 清th音 |
| ð | th | /ðɪs/ | this | 浊th音 |
| ʃ | sh | /ʃuː/ | shoe | sh音 |
| ʒ | zh | /ˈvɪʒən/ | vision | zh音 |
| ŋ | ng | /sɪŋ/ | sing | ng音 |
| ˈ | ' | /ˈæpl/ | apple | 主重音 |
| ˌ | , | /ˌekəˈnɒmɪk/ | economic | 次重音 |
| ː | : | /iː/ | see | 长音符 |

### 为什么使用IPA音标？

1. **国际标准**: IPA是国际语音学会制定的统一标准
2. **精确描述**: 每个符号对应唯一的语音
3. **学术权威**: 全世界词典和语言学研究都使用
4. **发音准确**: 避免因地区差异造成的发音混淆

### 英式音标转换功能

模板已自动启用英式音标转换，会将标准IPA符号转换为更易读的英式音标格式：

#### 转换示例

| 原IPA符号 | 英式音标 | 示例单词 | 转换结果 |
|-----------|----------|----------|----------|
| /fɹʌnt/ | /frʌnt/ | front | 倒r转为普通r |
| /ˈæpl/ | /'æpl/ | apple | 主重音符号简化 |
| /θɪŋk/ | /θɪŋk/ | think | 保持常用符号 |
| /iː/ | /i:/ | see | 长音符号简化 |
| /ɑː/ | /ɑ:/ | car | 长音符号简化 |

#### 美式到英式转换

还会自动将美式特有音素转换为英式：

- `ɚ` → `ə` (美式r化元音转为中性元音)
- `ɝ` → `ɜ:` (美式r化元音转为英式长e音)
- `ɑr` → `ɑ:` (美式ar转为英式长a)

#### 自定义转换

如需修改转换规则，可在 `britishPhoneticMap` 对象中调整映射关系。

## 🎮 使用方法

### 学习流程

1. **开始学习**: 打开卡片，看到听写界面
2. **选择发音**: 点击"英式发音"或"美式发音"按钮
3. **播放音频**: 点击播放按钮聆听发音
4. **调整速度**: 如需要可调整播放速度（0.5x-1.5x）
5. **输入答案**: 在输入框中输入听到的单词
6. **重复播放**: 可多次播放直到听清楚
7. **查看答案**: 点击"显示答案"翻到背面
8. **检查结果**: 背面会自动对比您的答案与正确答案
9. **查看音标**: 背面显示英式和美式音标
10. **学习内容**: 查看单词释义
11. **评估记忆**: 根据回答情况选择记忆难度

### 快捷键
- `Ctrl + Space`: 播放/暂停音频
- `Ctrl + R`: 清空输入框
- `Enter`: 保存当前输入（翻页前自动保存）

## 🔧 技术特性

### 音频支持
- **在线TTS**: 使用有道词典API提供发音
- **自动加载**: 根据Front字段自动获取音频
- **错误处理**: 音频加载失败时显示提示信息

### 音标功能
- **智能获取**: 多重API源自动获取英式和美式音标
  - Free Dictionary API (主要)
  - Cambridge Dictionary (备用)
  - Oxford Learner Dictionary (备用)
  - Wordnik API (备用)
  - Wiktionary API (备用)
- **英式转换**: 自动转换为英式音标格式，易于阅读
- **专业字体**: 使用专业的音标字体显示，确保符号正确显示
- **点击播放**: 点击音标可直接播放对应的发音
- **加载状态**: 显示"[加载中...]"状态，获取失败时显示备用提示

### 数据传输
- **本地存储**: 使用localStorage在正背面间传递用户输入
- **自动保存**: 多种事件触发自动保存用户输入
- **智能对比**: 标准化比较算法，忽略大小写和标点

### 响应式设计
- **移动端优化**: 适配手机和平板屏幕
- **触控友好**: 大按钮设计，便于触控操作
- **视觉效果**: 现代化渐变和动画效果

## ⚙️ 自定义选项

### 音频源配置
如需使用其他音频源，可修改 `getAudioUrl` 函数：

```javascript
function getAudioUrl(word, accent) {
    // 方法1: 本地音频文件
    // return `audio/${word}_${accent}.mp3`;
    
    // 方法2: 有道词典API（默认）
    if (accent === 'uk') {
        return `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(word)}&type=1`;
    } else {
        return `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(word)}&type=2`;
    }
    
    // 方法3: Google TTS
    // const lang = accent === 'uk' ? 'en-GB' : 'en-US';
    // return `https://translate.google.com/translate_tts?ie=UTF-8&tl=${lang}&client=tw-ob&q=${encodeURIComponent(word)}`;
}
```

### 样式定制
可以修改CSS变量来自定义外观：

```css
:root {
    --primary-color: #667eea;      /* 主色调 */
    --secondary-color: #764ba2;    /* 次色调 */
    --success-color: #4CAF50;      /* 成功色 */
    --error-color: #f44336;        /* 错误色 */
    --background-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

## 🔍 故障排除

### 常见问题

**Q: 音频无法播放？**
A: 
1. 检查网络连接
2. 确认浏览器允许音频自动播放
3. 尝试手动点击播放按钮
4. 检查Front字段是否有多余空格，系统会自动清理

**Q: 用户输入没有传递到背面？**
A: 
1. 确认在翻页前已输入内容
2. 检查浏览器是否支持localStorage
3. 尝试按Enter键手动保存

**Q: 界面显示异常？**
A: 
1. 检查Anki版本是否支持HTML5
2. 清除Anki缓存后重试
3. 确认模板代码完整无误

**Q: 移动端操作不便？**
A: 
1. 确认使用AnkiMobile或AnkiDroid最新版本
2. 尝试横屏显示
3. 调整浏览器缩放比例

**Q: 音标无法自动获取？**
A: 
1. 检查网络连接是否正常
2. 确认单词拼写正确
3. 某些专有名词或生僻词可能无法获取音标
4. 可以尝试刷新页面重新获取

**Q: 音标显示不正确？**
A: 
1. 确认设备支持IPA音标字体
2. 检查单词拼写是否正确
3. 某些复合词可能需要分开查询

**Q: 音标中的"r"为什么是倒着的？**
A: 
1. 这是标准IPA音标符号 ɹ，不是错误
2. 表示英语中的"r"音，与其他语言的r音区分
3. 这是国际语言学标准，确保发音准确性
4. 如需简化显示，可在代码中启用simplifyPhonetic函数

**Q: Front字段有多余空格或HTML实体会怎么样？**
A: 
1. 系统会自动清理多余空格，如" group " → "group"
2. 多个空格会合并为单个空格，如"you  are" → "you are"
3. 自动处理HTML实体，如"hello&nbsp;world" → "hello world"
4. 支持的HTML实体：&nbsp;、&amp;、&lt;、&gt;、&quot;、&#39;等
5. 不会影响音频播放和音标获取

**Q: 输入框自动获得焦点影响浏览器使用？**
A: 
1. 模板已移除自动聚焦功能
2. 不会干扰浏览器的正常操作
3. 需要时可手动点击输入框

## 📱 兼容性

### 支持的平台
- ✅ Anki Desktop (Windows/Mac/Linux)
- ✅ AnkiMobile (iOS)
- ✅ AnkiDroid (Android)
- ✅ AnkiWeb (基础功能)

### 浏览器要求
- HTML5音频支持
- JavaScript ES6+
- CSS3动画支持
- LocalStorage支持

## 🎉 使用技巧

1. **建立学习习惯**: 每天固定时间进行听写练习
2. **循序渐进**: 从简单单词开始，逐步增加难度
3. **多次重复**: 听不清楚时多播放几次
4. **记录错误**: 关注经常拼错的单词
5. **结合语境**: 学习例句中的用法
6. **调整速度**: 根据自己水平调整播放速度

## 📞 技术支持

如果您在使用过程中遇到问题，可以：
1. 查看本说明文档的故障排除部分
2. 检查Anki版本和设备兼容性
3. 确认模板代码是否完整安装

祝您学习愉快！🎓✨
